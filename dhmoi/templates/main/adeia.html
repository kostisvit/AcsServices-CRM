{% extends 'base.html' %}
{% load widget_tweaks %}
{% load auth_extras %}
{% load static %}
{% block content %}


	<head>
		<link rel="stylesheet" href="{% static 'adeia.css' %}">
	</head>
	<div class="row">
	<div class="column">
		<div class="card">
		<h3>Σύνολο άδειας</h3>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;Ημέρες άδειας έτους {% now "Y" %}:&nbsp;<strong>{{user.profile.days_sum}}</strong></p>
		</div>
	</div>

	<div class="column">
		<div class="card">
		<h3>Υπόλοιπο άδειας</h3>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;Υπόλοιπο προηγούμενου έτους:&nbsp;{{user.profile.days_left}}</strong></p>
		</div>
	</div>
	
	<div class="column">
		<div class="card">
		<h3>Σύνολο άδειας</h3>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;Σύνολο ημερών:&nbsp;<strong>{{user.profile.total}}</strong></p>
		</div>
	</div>
	
	<div class="column">
		<div class="card">
		<h3>Τρέχον έτος</h3>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;Σύνολο ημερών έτους {% now "Y" %}: 
		{% for adeia in alladeies %}
		{% if forloop.first %}
		<strong>{{adeia.total}}</strong></p>
		{%endif%}
		{% endfor %}
		</div>
	</div>
	</div>
	<br>
	<div>
	<a href="{% url 'adeia_new' %}" class="btn btn-primary btn-sm">
		<span class="fa fa-plus"></span>&nbsp<strong>Νέα εγγραφή</strong></a>
	<a href="{% url 'export_adeia' %}" class="btn btn-success btn-sm">
		<span class="fa fa-download"></span>&nbsp<strong>Export</strong></a>
	</div>
	<br>
	<table id="adeia-table" border="0"  class="table table-sm">
	<thead>
			<tr>
				<th colspan="8" class="tbhead">Επαφές</th>
			</tr>
	<tr style="color:#333399; text-align: center;">
			<th class="tableHead">Υπάλληλος</th>
			<th class="tableHead">Τύπος Άδειας<i class="fas fa-sort fa-fw"></i></th>
			<th class="tableHead">Αρχή<i class="fas fa-sort fa-fw"></i></th>
			<th class="tableHead">Τέλος<i class="fas fa-sort fa-fw"></i></th>
			<th class="tableHead">Σύνολο<i class="fas fa-sort fa-fw"></i></th>
			<th class="tableHead">Ημ. Καταγραφής<i class="fas fa-sort fa-fw"></i></th>
			<th class="tableHead">Διόρθωση</th>
		</tr>
	</thead>
	<tbody>
		{% for adeia in alladeies %}
		<tr style="text-align: center;">
			<td>{{adeia.employee.get_full_name}}</td>
			<td>{{adeia.get_adeiatype_display}}</td>
			<td>{{adeia.startdate|date:"d/m/Y"}}</td>
			<td>{{adeia.enddate|date:"d/m/Y"}}</td>
			<td>{{adeia.days}}</td>
			<td>{{adeia.createddate|date:"d/m/Y"}}</td>
			<td><a href="{% url 'adeia_update' pk=adeia.pk %}" class="btn btn-primary btn-sm mr-1"> 
			<span><span><i class="fa fa-eye" aria-hidden="true"></i></span>
			<a class="btn btn-danger btn-sm" onclick="return confirm('Είστε σίγουρος/η για την διαγραφή;');" href="{% url 'delete_adeia' pk=adeia.pk %}"><span><span><i class="fa fa-trash" aria-hidden="true"></i></span>            
			</a>           
			</a></td>
			</tr>
		{% endfor %}
		</tbody>
		<tfoot> 
		{% for adeia in alladeies %}
	{% if forloop.first %}
		<tr>  
			<tr style="text-align: center;"> 
				<td style="background-color: white;">&nbsp;</td> 
				<td style="background-color: white;">&nbsp;</td>
				<td style="background-color: white;">&nbsp;</td>
				<th colspan="1" style="background-color: white;">Σύνολο</th> 
				<td ><strong>{{adeia.total}}</strong></td> 
				<td style="background-color: white;">&nbsp;</td> 
				<td style="background-color: white;">&nbsp;</td> 
			</tr> 
			{%endif%}
		{% endfor %}
		</tfoot>
	</table>
	<script>
		$(document).ready( function () {
			$('#adeia-table').DataTable({
			"pagingType": "full_numbers",
			"language": {
					"lengthMenu": "Εμφάνιση _MENU_ εγγραφών ανά σελίδα",
					"zeroRecords": "Nothing found - sorry",
					"info": "Σελίδα _PAGE_ από _PAGES_",
					"infoEmpty": "No records available",
					"infoFiltered": "(filtered from _MAX_ total records)",
					"search": "Αναζήτηση:",
					"paginate": {
					"previous": " < ",
					"next": " > ",
					"first": " << ",
					"last": " >> "
				}
				},
				dom: 'Bfrtip',
             buttons: [
            'copy', 'csv', 'excel', 'pdf',
        ],
			});
		} );
		</script>
	
{% endblock %}

